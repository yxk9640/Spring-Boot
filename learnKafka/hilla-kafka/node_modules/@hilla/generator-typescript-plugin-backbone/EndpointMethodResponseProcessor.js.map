{
  "version": 3,
  "sources": ["src/EndpointMethodResponseProcessor.ts"],
  "sourcesContent": ["import type Plugin from '@hilla/generator-typescript-core/Plugin.js';\nimport type DependencyManager from '@hilla/generator-typescript-utils/dependencies/DependencyManager.js';\nimport type { OpenAPIV3 } from 'openapi-types';\nimport type { ReadonlyDeep } from 'type-fest';\nimport type { TypeNode } from 'typescript';\nimport TypeSchemaProcessor from './TypeSchemaProcessor.js';\nimport { defaultMediaType } from './utils.js';\n\nexport type EndpointMethodResponses = ReadonlyDeep<OpenAPIV3.ResponsesObject>;\nexport type EndpointMethodResponse = ReadonlyDeep<OpenAPIV3.ResponseObject>;\n\nexport default class EndpointMethodResponseProcessor {\n  readonly #code: string;\n  readonly #dependencies: DependencyManager;\n  readonly #owner: Plugin;\n  readonly #response: EndpointMethodResponse;\n\n  constructor(\n    code: string,\n    response: EndpointMethodResponses[string],\n    dependencyManager: DependencyManager,\n    owner: Plugin,\n  ) {\n    this.#code = code;\n    this.#owner = owner;\n    this.#dependencies = dependencyManager;\n    this.#response = owner.resolver.resolve(response);\n  }\n\n  process(): readonly TypeNode[] {\n    switch (this.#code) {\n      case '200':\n        return this.#processOk();\n      default:\n        this.#owner.logger.warn(`Response code '${this.#code} is not supported'`);\n        return [];\n    }\n  }\n\n  #processOk(): readonly TypeNode[] {\n    const rawSchema = this.#response.content?.[defaultMediaType]?.schema;\n\n    return rawSchema ? new TypeSchemaProcessor(rawSchema, this.#dependencies).process() : [];\n  }\n}\n"],
  "mappings": "AAKA,OAAO,yBAAyB;AAChC,SAAS,wBAAwB;AAKjC,MAAO,gCAA8C;AAAA,EAC1C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAET,YACE,MACA,UACA,mBACA,OACA;AACA,SAAK,QAAQ;AACb,SAAK,SAAS;AACd,SAAK,gBAAgB;AACrB,SAAK,YAAY,MAAM,SAAS,QAAQ,QAAQ;AAAA,EAClD;AAAA,EAEA,UAA+B;AAC7B,YAAQ,KAAK,OAAO;AAAA,MAClB,KAAK;AACH,eAAO,KAAK,WAAW;AAAA,MACzB;AACE,aAAK,OAAO,OAAO,KAAK,kBAAkB,KAAK,KAAK,oBAAoB;AACxE,eAAO,CAAC;AAAA,IACZ;AAAA,EACF;AAAA,EAEA,aAAkC;AAChC,UAAM,YAAY,KAAK,UAAU,UAAU,gBAAgB,GAAG;AAE9D,WAAO,YAAY,IAAI,oBAAoB,WAAW,KAAK,aAAa,EAAE,QAAQ,IAAI,CAAC;AAAA,EACzF;AACF;",
  "names": []
}
